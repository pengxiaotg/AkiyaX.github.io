---
title: 'C#è®¾è®¡æ¨¡å¼[3] - æŠ½è±¡å·¥å‚æ¨¡å¼'
category: è®¾è®¡æ¨¡å¼
tags: .net
date: 2020-03-21 22:07:19
id: abstract-fatory-pattern
---

ğŸš€[24ä¸ªC#è®¾è®¡æ¨¡å¼ç›®å½•](https://akiyax.github.io/csharp-design-pattern/) &nbsp;&nbsp; ğŸº[æºç åœ°å€](https://github.com/AkiyaX/CSharpDesignPattern)

# æ¦‚è¿°

åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚éƒ½å¯ä»¥æä¾›ä¸€ä¸ªå…·ä½“ä»äº§å“ï¼Œè€Œåœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚æä¾›çš„åˆ™æ˜¯ä¸€ä¸ª**äº§å“æ—**ã€‚

> **æŠ½è±¡å·¥å‚æ¨¡å¼**ï¼š æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚

ä½¿ç”¨é¢‘ç‡ï¼šâ˜…â˜…â˜…â˜…â˜…

# ç»“æ„ä¸å®ç°

è¿™é‡Œä¸¾ä¸€ä¸ªæ–°çš„ğŸŒ°ã€‚åœ¨ä»Šå¤©çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œé»‘æš—æ¨¡å¼ï¼ˆDark Modeï¼‰æ˜¯ä¸€ä¸ªå¸¸è§çš„åŠŸèƒ½ï¼Œå°±åƒæœ¬åšå®¢æä¾›çš„ä¸€æ ·ï¼Œå¯ä»¥åœ¨æµ…è‰²å’Œæ·±è‰²ä¸»é¢˜é—´è¿›è¡Œåˆ‡æ¢ï¼š

| |æµ…è‰²ä¸»é¢˜| æ·±è‰²ä¸»é¢˜|
|--|---|---|
|æŒ‰é’®|<button style="border: white;padding: 4px;"> Light Theme </button>|<button style="background-color: black; color: white; border: black;padding: 4px;"> Dark Theme </button>|
|æ–‡æœ¬æ¡†| <input style="border: white;padding: 4px;" placeholder="Light"/>|<input style="background-color: black; color: white; border: black;padding: 4px;" placeholder="Dark"/>|
|å¤é€‰æ¡†| ...|
|...|




é™¤äº†æŒ‰é’®ä»¥å¤–ï¼Œè¿˜æœ‰æ–‡æœ¬æ¡†ã€å¤é€‰æ¡†ç­‰ç­‰ï¼Œç»„æˆäº†æ•´ä¸ªä¸»é¢˜çš„çš®è‚¤åº“ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæµ…è‰²æŒ‰é’®ã€æµ…è‰²æ–‡æœ¬æ¡†ã€æµ…è‰²å¤é€‰æ¡†ç­‰ç­‰ç»„æˆä¸€ä¸ªäº§å“æ—ï¼Œè€Œ**æµ…è‰²ä¸»é¢˜å·¥å‚**è´Ÿè´£ç”Ÿäº§è¿™**ä¸€ç³»åˆ—äº§å“**ã€‚

æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­è§’è‰²ä¸å·¥å‚æ–¹æ³•æ¨¡å¼åŸºæœ¬ä¸€è‡´ï¼š

- AbstractFactory ï¼ˆæŠ½è±¡å·¥å‚è§’è‰²ï¼‰
- ConcreteFactory ï¼ˆå…·ä½“å·¥å‚è§’è‰²ï¼‰
- AbstractProduct ï¼ˆæŠ½è±¡äº§å“è§’è‰²ï¼‰
- ConcreteProduct ï¼ˆå…·ä½“äº§å“è§’è‰²ï¼‰

{% plantuml %}

    !includeurl https://raw.githubusercontent.com/AkiyaX/AkiyaX.github.io/hexo/theme.puml   

    package ConcreteFactory <<Folder>> {
        class LightThemeFactory
        class DarkThemeFactory
    }

    package ConcreteProduct <<Folder>> {
        class LightButton
        class LightTextField
        class LightCheckBox
        class DarkButton
        class DarkTextField
        class DarkCheckBox
    }

    package AbstractProduct <<Folder>> {
        interface Button
        interface TextField
        interface CheckBox
    }

    interface ThemeFactroy {
        + Button CreateButton()
        + TextField CreateTextField()
        + CheckBox CreateCheckBox()
    }

    class LightThemeFactory {
        + Button CreateButton()
        + TextField CreateTextField()
        + CheckBox CreateCheckBox()
    }

    class DarkThemeFactory {
        + Button CreateButton()
        + TextField CreateTextField()
        + CheckBox CreateCheckBox()
    }

    interface Button {
        + void Display()
    }

    interface TextField {
        + void Display()
    }

    interface CheckBox {
        + void Display()
    }

    class LightButton { 
        + void Display()
    }
    class LightTextField {
        + void Display()  
    }
    class LightCheckBox {
        + void Display()
    }
    class DarkTextField {
        + void Display()
    }
    class DarkButton {
        + void Display()
    }
    class DarkCheckBox {
        + void Display()
    }

    ThemeFactroy <|-- LightThemeFactory
    ThemeFactroy <|-- DarkThemeFactory
    
    LightThemeFactory ..> LightButton : <<create>>
    LightThemeFactory ..> LightTextField : <<create>>
    LightThemeFactory ..> LightCheckBox : <<create>>
    DarkThemeFactory ..> DarkButton : <<create>>
    DarkThemeFactory ..> DarkTextField : <<create>>
    DarkThemeFactory ..> DarkCheckBox : <<create>>

    LightButton --|> Button
    LightTextField --|> TextField
    LightCheckBox --|> CheckBox
    DarkTextField --|> TextField
    DarkButton --|> Button
    DarkCheckBox --|> CheckBox

{% endplantuml %}

åŒºåˆ«ä¸»è¦åœ¨äº**å…·ä½“å·¥å‚è§’è‰²**å’Œ**æŠ½è±¡å·¥å‚è§’è‰²**èŒè´£ï¼Œåœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚éƒ½å¯ä»¥æä¾›ä¸€ä¸ªå…·ä½“çš„äº§å“ï¼Œè€Œåœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­ï¼Œæ¯ä¸ªå…·ä½“å·¥å‚æä¾›çš„åˆ™æ˜¯ä¸€ä¸ª**äº§å“æ—**ã€‚

```cs
interface ThemeFactory
{
    public Button CreateButton();
    public TextField CreateTextField();
    public CheckBox CreateCheckBox();
}
```

```cs
class LightThemeFactory : ThemeFactory
{
    public Button CreateButton()
    {
        return new LightButton();
    }

    public CheckBox CreateCheckBox()
    {
        return new LightCheckBox();
    }

    public TextField CreateTextField()
    {
        return new LightTextField();
    }
}
```

```cs
class DarkThemeFactory : ThemeFactory
{

    public Button CreateButton()
    {
        return new DarkButton();
    }

    public CheckBox CreateCheckBox()
    {
        return new DarkCheckBox();
    }

    public TextField CreateTextField()
    {
        return new DarkTextField();
    }
}
```

åœ¨å®¢æˆ·ç«¯è°ƒç”¨æ—¶ï¼Œåªéœ€è¦æŒ‡å®šå…·ä½“å·¥å‚ï¼Œå°±å¯ä»¥å¸¦æ¥æ•´ä¸ªäº§å“æ—

```cs
static void Main(string[] args)
{
    ThemeFactory themeFactory = new LightThemeFactory();
    //ThemeFactory themeFactory = new DarkThemeFactory();
    Button button = themeFactory.CreateButton();
    TextField textField = themeFactory.CreateTextField();
    CheckBox checkBox = themeFactory.CreateCheckBox();
    button.Display();
    textField.Display();
    checkBox.Display();
}
```

åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ–°å¢ä¸€ä¸ªä¸»é¢˜ï¼Œæ¯”å¦‚â€œé«˜å¯¹æ¯”åº¦ä¸»é¢˜â€æˆ–â€œæŠ¤çœ¼ä¸»é¢˜â€ï¼Œåˆ™åªéœ€è¦å¢åŠ ç›¸åº”çš„å…·ä½“äº§å“è§’è‰²å’Œå…·ä½“å·¥å‚è§’è‰²ï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ï¼Œå¾ˆå¥½çš„ç¬¦åˆäº†å¼€é—­åŸåˆ™ã€‚ä½†æ˜¯å¦‚æœéœ€è¦å¢åŠ æ–°çš„æŠ½è±¡äº§å“ï¼Œæ¯”å¦‚â€œä¸‹æ‹‰èœå•â€ã€â€œæ—¥æœŸé€‰æ‹©æ§ä»¶â€æ—¶ï¼Œå°±éœ€è¦ä¿®æ”¹æ‰€æœ‰å·¥å‚è§’è‰²ï¼Œè¿èƒŒäº†å¼€é—­åŸåˆ™ã€‚è¿™å°±æ˜¯æŠ½è±¡å·¥å‚æ¨¡å¼å­˜åœ¨çš„**å¼€é—­åŸåˆ™çš„å€¾æ–œæ€§**ã€‚


# ä¼˜ç¼ºç‚¹

ä¼˜ç‚¹ï¼š

1. æŠ½è±¡å·¥å‚æ¨¡å¼éš”ç¦»äº†å…·ä½“ç±»çš„ç”Ÿæˆï¼Œæ›´æ¢ä¸€ä¸ªå·¥å‚å˜å¾—ç›¸å¯¹å®¹æ˜“ã€‚
2. å½“ä¸€ä¸ªäº§å“æ—ä¸­çš„å¯¹å„å¯¹è±¡è¢«è®¾è®¡æˆä¸€èµ·å·¥ä½œæ—¶ï¼Œå®ƒèƒ½å¤Ÿä¿è¯å®¢æˆ·ç«¯å§‹ç»ˆä½¿ç”¨åŒä¸€ä¸ªäº§å“æ—çš„å¯¹è±¡ã€‚
3. å¢åŠ æ–°çš„äº§å“æ—å¾ˆæ–¹ä¾¿ï¼Œæ— é¡»ä¿®æ”¹å·²æœ‰ç³»ç»Ÿï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚

ç¼ºç‚¹ï¼š

1. å¢åŠ æ–°çš„æŠ½è±¡äº§å“éº»çƒ¦ï¼Œéœ€è¦å¯¹åŸæœ‰ç³»ç»Ÿè¿›è¡Œè¾ƒå¤§ä¿®æ”¹ï¼Œè¿èƒŒå¼€é—­åŸåˆ™ã€‚

# é€‚ç”¨åœºæ™¯

- ç³»ç»Ÿä¸ä¾èµ–äº§å“ç±»å®ä¾‹å¦‚ä½•è¢«åˆ›å»ºã€ç»„åˆå’Œè¡¨è¾¾çš„ç»†èŠ‚ã€‚å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨è§£è€¦ã€‚
- ç³»ç»Ÿä¸­æœ‰å¤šäºä¸€ä¸ªçš„äº§å“æ—ï¼Œä½†æ˜¯æ¯æ¬¡åªæ˜¯ç”¨å…¶ä¸­æŸä¸€äº§å“æ—ã€‚
- å±äºåŒä¸€äº§å“æ—çš„äº§å“å°†åœ¨ä¸€èµ·ä½¿ç”¨ï¼Œè¿™ä¸€çº¦æŸåœ¨ç³»ç»Ÿè®¾è®¡æ—¶æœ‰æ‰€ä½“ç°ã€‚
- äº§å“ç±»å‹ç¨³å®šï¼Œä¸ä¼šå‘ç³»ç»Ÿä¸­å¢åŠ æ–°çš„äº§å“ç±»å‹æˆ–åˆ é™¤å·²æœ‰äº§å“ç±»å‹ã€‚